import{r as S,j as h,u as z,H as W,L as G}from"./app-Dj1UQZe5.js";import{M as $}from"./MenuNavigation-DWYKK8CD.js";var _={exports:{}},E,L;function X(){if(L)return E;L=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return E=t,E}var k,D;function Y(){if(D)return k;D=1;var t=X();function r(){}function a(){}return a.resetWarningCache=r,k=function(){function o(e,c,u,l,f,d){if(d!==t){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}o.isRequired=o;function i(){return o}var s={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:i,element:o,elementType:o,instanceOf:i,node:o,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:a,resetWarningCache:r};return s.PropTypes=s,s},k}var P;function J(){return P||(P=1,_.exports=Y()()),_.exports}var n=J(),T=function(){return T=Object.assign||function(t){for(var r,a=1,o=arguments.length;a<o;a++){r=arguments[a];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},T.apply(this,arguments)},U={onActivate:n.func,onAddUndo:n.func,onBeforeAddUndo:n.func,onBeforeExecCommand:n.func,onBeforeGetContent:n.func,onBeforeRenderUI:n.func,onBeforeSetContent:n.func,onBeforePaste:n.func,onBlur:n.func,onChange:n.func,onClearUndos:n.func,onClick:n.func,onContextMenu:n.func,onCommentChange:n.func,onCompositionEnd:n.func,onCompositionStart:n.func,onCompositionUpdate:n.func,onCopy:n.func,onCut:n.func,onDblclick:n.func,onDeactivate:n.func,onDirty:n.func,onDrag:n.func,onDragDrop:n.func,onDragEnd:n.func,onDragGesture:n.func,onDragOver:n.func,onDrop:n.func,onExecCommand:n.func,onFocus:n.func,onFocusIn:n.func,onFocusOut:n.func,onGetContent:n.func,onHide:n.func,onInit:n.func,onInput:n.func,onKeyDown:n.func,onKeyPress:n.func,onKeyUp:n.func,onLoadContent:n.func,onMouseDown:n.func,onMouseEnter:n.func,onMouseLeave:n.func,onMouseMove:n.func,onMouseOut:n.func,onMouseOver:n.func,onMouseUp:n.func,onNodeChange:n.func,onObjectResizeStart:n.func,onObjectResized:n.func,onObjectSelected:n.func,onPaste:n.func,onPostProcess:n.func,onPostRender:n.func,onPreProcess:n.func,onProgressState:n.func,onRedo:n.func,onRemove:n.func,onReset:n.func,onSaveContent:n.func,onSelectionChange:n.func,onSetAttrib:n.func,onSetContent:n.func,onShow:n.func,onSubmit:n.func,onUndo:n.func,onVisualAid:n.func,onSkinLoadError:n.func,onThemeLoadError:n.func,onModelLoadError:n.func,onPluginLoadError:n.func,onIconsLoadError:n.func,onLanguageLoadError:n.func,onScriptsLoad:n.func,onScriptsLoadError:n.func},Q=T({apiKey:n.string,licenseKey:n.string,id:n.string,inline:n.bool,init:n.object,initialValue:n.string,onEditorChange:n.func,value:n.string,tagName:n.string,tabIndex:n.number,cloudChannel:n.string,plugins:n.oneOfType([n.string,n.array]),toolbar:n.oneOfType([n.string,n.array]),disabled:n.bool,readonly:n.bool,textareaName:n.string,tinymceScriptSrc:n.oneOfType([n.string,n.arrayOf(n.string),n.arrayOf(n.shape({src:n.string,async:n.bool,defer:n.bool}))]),rollback:n.oneOfType([n.number,n.oneOf([!1])]),scriptLoading:n.shape({async:n.bool,defer:n.bool,delay:n.number})},U),V=function(t){var r=t;return r&&r.tinymce?r.tinymce:null},w=function(t){return typeof t=="function"},R=function(t){return t in U},N=function(t){return t.substr(2)},Z=function(t,r,a,o,i,s,e){var c=Object.keys(i).filter(R),u=Object.keys(s).filter(R),l=c.filter(function(d){return s[d]===void 0}),f=u.filter(function(d){return i[d]===void 0});l.forEach(function(d){var p=N(d),m=e[p];a(p,m),delete e[p]}),f.forEach(function(d){var p=o(t,d),m=N(d);e[m]=p,r(m,p)})},ee=function(t,r,a,o,i){return Z(i,t.on.bind(t),t.off.bind(t),function(s,e){return function(c){var u;return(u=s(e))===null||u===void 0?void 0:u(c,t)}},r,a,o)},B=0,q=function(t){var r=Date.now(),a=Math.floor(Math.random()*1e9);return B++,t+"_"+a+B+String(r)},M=function(t){return t!==null&&(t.tagName.toLowerCase()==="textarea"||t.tagName.toLowerCase()==="input")},F=function(t){return typeof t>"u"||t===""?[]:Array.isArray(t)?t:t.split(" ")},ne=function(t,r){return F(t).concat(F(r))},te=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},re=function(t){if(!("isConnected"in Node.prototype)){for(var r=t,a=t.parentNode;a!=null;)r=a,a=r.parentNode;return r===t.ownerDocument}return t.isConnected},H=function(t,r){t!==void 0&&(t.mode!=null&&typeof t.mode=="object"&&typeof t.mode.set=="function"?t.mode.set(r):t.setMode(r))},oe=function(t){var r=V(t);if(!r)throw new Error("tinymce should have been loaded into global scope");return r},A=function(t){return t.options&&t.options.isRegistered("disabled")},O=function(){return O=Object.assign||function(t){for(var r,a=1,o=arguments.length;a<o;a++){r=arguments[a];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},O.apply(this,arguments)},ie=function(t,r,a){var o,i,s=t.createElement("script");s.referrerPolicy="origin",s.type="application/javascript",s.id=r.id,s.src=r.src,s.async=(o=r.async)!==null&&o!==void 0?o:!1,s.defer=(i=r.defer)!==null&&i!==void 0?i:!1;var e=function(){s.removeEventListener("load",e),s.removeEventListener("error",c),a(r.src)},c=function(u){s.removeEventListener("load",e),s.removeEventListener("error",c),a(r.src,u)};s.addEventListener("load",e),s.addEventListener("error",c),t.head&&t.head.appendChild(s)},ae=function(t){var r={},a=function(e,c){var u=r[e];u.done=!0,u.error=c;for(var l=0,f=u.handlers;l<f.length;l++){var d=f[l];d(e,c)}u.handlers=[]},o=function(e,c,u){var l=function(C){return u!==void 0?u(C):console.error(C)};if(e.length===0){l(new Error("At least one script must be provided"));return}for(var f=0,d=!1,p=function(C,I){d||(I?(d=!0,l(I)):++f===e.length&&c())},m=0,v=e;m<v.length;m++){var g=v[m],y=r[g.src];if(y)y.done?p(g.src,y.error):y.handlers.push(p);else{var j=q("tiny-");r[g.src]={id:j,src:g.src,done:!1,error:null,handlers:[p]},ie(t,O({id:j},g),a)}}},i=function(){for(var e,c=0,u=Object.values(r);c<u.length;c++){var l=u[c],f=t.getElementById(l.id);f!=null&&f.tagName==="SCRIPT"&&((e=f.parentNode)===null||e===void 0||e.removeChild(f))}r={}},s=function(){return t};return{loadScripts:o,deleteScripts:i,getDocument:s}},se=function(){var t=[],r=function(i){var s=t.find(function(e){return e.getDocument()===i});return s===void 0&&(s=ae(i),t.push(s)),s},a=function(i,s,e,c,u){var l=function(){return r(i).loadScripts(s,c,u)};e>0?setTimeout(l,e):l()},o=function(){for(var i=t.pop();i!=null;i=t.pop())i.deleteScripts()};return{loadList:a,reinitialize:o}},ce=se(),ue=(function(){var t=function(r,a){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,i){o.__proto__=i}||function(o,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(o[s]=i[s])},t(r,a)};return function(r,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");t(r,a);function o(){this.constructor=r}r.prototype=a===null?Object.create(a):(o.prototype=a.prototype,new o)}})(),b=function(){return b=Object.assign||function(t){for(var r,a=1,o=arguments.length;a<o;a++){r=arguments[a];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},b.apply(this,arguments)},x="change keyup compositionend setcontent CommentChange",le=(function(t){ue(r,t);function r(a){var o,i,s,e=t.call(this,a)||this;return e.rollbackTimer=void 0,e.valueCursor=void 0,e.rollbackChange=function(){var c=e.editor,u=e.props.value;c&&u&&u!==e.currentContent&&c.undoManager.ignore(function(){if(c.setContent(u),e.valueCursor&&(!e.inline||c.hasFocus()))try{c.selection.moveToBookmark(e.valueCursor)}catch{}}),e.rollbackTimer=void 0},e.handleBeforeInput=function(c){if(e.props.value!==void 0&&e.props.value===e.currentContent&&e.editor&&(!e.inline||e.editor.hasFocus()))try{e.valueCursor=e.editor.selection.getBookmark(3)}catch{}},e.handleBeforeInputSpecial=function(c){(c.key==="Enter"||c.key==="Backspace"||c.key==="Delete")&&e.handleBeforeInput(c)},e.handleEditorChange=function(c){var u=e.editor;if(u&&u.initialized){var l=u.getContent();e.props.value!==void 0&&e.props.value!==l&&e.props.rollback!==!1&&(e.rollbackTimer||(e.rollbackTimer=window.setTimeout(e.rollbackChange,typeof e.props.rollback=="number"?e.props.rollback:200))),l!==e.currentContent&&(e.currentContent=l,w(e.props.onEditorChange)&&e.props.onEditorChange(l,u))}},e.handleEditorChangeSpecial=function(c){(c.key==="Backspace"||c.key==="Delete")&&e.handleEditorChange(c)},e.initialise=function(c){var u,l,f;c===void 0&&(c=0);var d=e.elementRef.current;if(d){if(!re(d)){if(c===0)setTimeout(function(){return e.initialise(1)},1);else if(c<100)setTimeout(function(){return e.initialise(c+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var p=oe(e.view),m=b(b(b(b({},e.props.init),{selector:void 0,target:d,disabled:e.props.disabled,readonly:e.props.readonly,inline:e.inline,plugins:ne((u=e.props.init)===null||u===void 0?void 0:u.plugins,e.props.plugins),toolbar:(l=e.props.toolbar)!==null&&l!==void 0?l:(f=e.props.init)===null||f===void 0?void 0:f.toolbar}),e.props.licenseKey?{license_key:e.props.licenseKey}:{}),{setup:function(v){e.editor=v,e.bindHandlers({}),e.inline&&!M(d)&&v.once("PostRender",function(g){v.setContent(e.getInitialValue(),{no_events:!0})}),e.props.init&&w(e.props.init.setup)&&e.props.init.setup(v),e.props.disabled&&(A(e.editor)?e.editor.options.set("disabled",e.props.disabled):e.editor.mode.set("readonly"))},init_instance_callback:function(v){var g,y=e.getInitialValue();e.currentContent=(g=e.currentContent)!==null&&g!==void 0?g:v.getContent(),e.currentContent!==y&&(e.currentContent=y,v.setContent(y),v.undoManager.clear(),v.undoManager.add(),v.setDirty(!1)),e.props.init&&w(e.props.init.init_instance_callback)&&e.props.init.init_instance_callback(v)}});e.inline||(d.style.visibility=""),M(d)&&(d.value=e.getInitialValue()),p.init(m)}},e.id=e.props.id||q("tiny-react"),e.elementRef=S.createRef(),e.inline=(s=(o=e.props.inline)!==null&&o!==void 0?o:(i=e.props.init)===null||i===void 0?void 0:i.inline)!==null&&s!==void 0?s:!1,e.boundHandlers={},e}return Object.defineProperty(r.prototype,"view",{get:function(){var a,o;return(o=(a=this.elementRef.current)===null||a===void 0?void 0:a.ownerDocument.defaultView)!==null&&o!==void 0?o:window},enumerable:!1,configurable:!0}),r.prototype.componentDidUpdate=function(a){var o=this,i,s;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(a),this.editor.initialized)){if(this.currentContent=(i=this.currentContent)!==null&&i!==void 0?i:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==a.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var e=this.editor;e.undoManager.transact(function(){var u;if(!o.inline||e.hasFocus())try{u=e.selection.getBookmark(3)}catch{}var l=o.valueCursor;if(e.setContent(o.props.value),!o.inline||e.hasFocus())for(var f=0,d=[u,l];f<d.length;f++){var p=d[f];if(p)try{e.selection.moveToBookmark(p),o.valueCursor=p;break}catch{}}})}if(this.props.readonly!==a.readonly){var c=(s=this.props.readonly)!==null&&s!==void 0?s:!1;H(this.editor,c?"readonly":"design")}this.props.disabled!==a.disabled&&(A(this.editor)?this.editor.options.set("disabled",this.props.disabled):H(this.editor,this.props.disabled?"readonly":"design"))}},r.prototype.componentDidMount=function(){var a=this,o,i,s,e,c;if(V(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(i=(o=this.props).onScriptsLoadError)===null||i===void 0||i.call(o,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((s=this.elementRef.current)===null||s===void 0)&&s.ownerDocument){var u=function(){var f,d;(d=(f=a.props).onScriptsLoad)===null||d===void 0||d.call(f),a.initialise()},l=function(f){var d,p;(p=(d=a.props).onScriptsLoadError)===null||p===void 0||p.call(d,f)};ce.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(c=(e=this.props.scriptLoading)===null||e===void 0?void 0:e.delay)!==null&&c!==void 0?c:0,u,l)}},r.prototype.componentWillUnmount=function(){var a=this,o=this.editor;o&&(o.off(x,this.handleEditorChange),o.off(this.beforeInputEvent(),this.handleBeforeInput),o.off("keypress",this.handleEditorChangeSpecial),o.off("keydown",this.handleBeforeInputSpecial),o.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(i){o.off(i,a.boundHandlers[i])}),this.boundHandlers={},o.remove(),this.editor=void 0)},r.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},r.prototype.beforeInputEvent=function(){return te()?"beforeinput SelectionChange":"SelectionChange"},r.prototype.renderInline=function(){var a=this.props.tagName,o=a===void 0?"div":a;return S.createElement(o,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},r.prototype.renderIframe=function(){return S.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},r.prototype.getScriptSources=function(){var a,o,i=(a=this.props.scriptLoading)===null||a===void 0?void 0:a.async,s=(o=this.props.scriptLoading)===null||o===void 0?void 0:o.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:i,defer:s}]:this.props.tinymceScriptSrc.map(function(l){return typeof l=="string"?{src:l,async:i,defer:s}:l});var e=this.props.cloudChannel,c=this.props.apiKey?this.props.apiKey:"no-api-key",u="https://cdn.tiny.cloud/1/".concat(c,"/tinymce/").concat(e,"/tinymce.min.js");return[{src:u,async:i,defer:s}]},r.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},r.prototype.bindHandlers=function(a){var o=this;if(this.editor!==void 0){ee(this.editor,a,this.props,this.boundHandlers,function(c){return o.props[c]});var i=function(c){return c.onEditorChange!==void 0||c.value!==void 0},s=i(a),e=i(this.props);!s&&e?(this.editor.on(x,this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):s&&!e&&(this.editor.off(x,this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},r.propTypes=Q,r.defaultProps={cloudChannel:"8"},r})(S.Component);function de({content:t,onChange:r,editable:a=!0}){return h.jsx(le,{apiKey:"zu3gxbyutazbz5ywspxhw515zri33ke579q508fbmntg4qh5",value:t,disabled:!a,init:{height:400,menubar:!1,plugins:["anchor","autolink","charmap","codesample","emoticons","link","lists","media","searchreplace","table","visualblocks","wordcount","checklist","mediaembed","casechange","formatpainter","pageembed","a11ychecker","tinymcespellchecker","permanentpen","powerpaste","advtable","advcode","advtemplate","uploadcare","mentions","tableofcontents","footnotes","mergetags","autocorrect","typography","inlinecss","markdown","importword","exportword","exportpdf"],toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link media table mergetags | addcomment showcomments | spellcheckdialog a11ycheck typography uploadcare | align lineheight | checklist numlist bullist indent outdent | emoticons charmap | removeformat",automatic_uploads:!0,images_upload_url:"/blog/images",images_upload_handler:async o=>{var c;const i=new FormData;return i.append("image",o.blob(),o.filename()),(await(await fetch("/blog/images",{method:"POST",headers:{"X-CSRF-TOKEN":((c=document.querySelector('meta[name="csrf-token"]'))==null?void 0:c.getAttribute("content"))||""},body:i})).json()).url}},onEditorChange:o=>r(o)})}function fe({image:t,onUploaded:r,disabled:a=!1}){const o=async i=>{var l;const s=(l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"),e=new FormData;e.append("image",i);const u=await(await fetch("/uploads/feature-image",{method:"POST",headers:{"X-CSRF-TOKEN":s??"",accept:"application/json"},body:e})).json();r(u.url)};return h.jsxs("div",{className:"space-y-2",children:[t&&h.jsx("img",{src:t,alt:"Feature image",className:"rounded-xl max-h-64 object-cover"}),!a&&h.jsx("input",{name:"file",type:"file",accept:"image/*",onChange:i=>i.target.files&&o(i.target.files[0])})]})}const K=t=>new Date(t).toISOString().split("T")[0],ve=({post:t})=>{const[r,a]=S.useState(!1),{data:o,patch:i,setData:s}=z({content:t.content,feature_image:t.feature_image});return h.jsxs(h.Fragment,{children:[h.jsx(W,{title:t.title}),h.jsx($,{}),h.jsx("div",{className:"w-full flex flex-col gap-4 justify-start items-center bg-gray-100 min-h-screen mb-12",children:h.jsxs("div",{className:"container w-3/4 flex flex-col gap-4",children:[h.jsx(G,{href:"/blog",children:"â† Back to blog"}),h.jsx("h2",{className:"text-lg font-bold text-gray-900",children:t.title}),!r&&t.feature_image&&h.jsx("img",{src:t.feature_image,alt:t.title,className:"rounded-2xl mb-6 w-2/4 h-2/4"}),r&&h.jsx(fe,{image:o.feature_image,onUploaded:e=>s("feature_image",e)}),r?h.jsx(de,{content:o.content,onChange:e=>s("content",e),editable:r}):h.jsx("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:t.content}}),h.jsx("div",{children:h.jsx("time",{dateTime:K(t.published_at),children:K(t.published_at)})}),h.jsx("div",{className:"container flex flex-row flex-wrap gap-2",children:r?h.jsx("button",{className:"bg-blue-700 text-base text-white font-medium px-4 py-2 rounded shadow",onClick:()=>i(`/blog/${t.slug}`,{preserveScroll:!0,onSuccess:()=>a(!1)}),children:"Save"}):h.jsx("button",{className:"bg-green-700 text-base text-white font-medium px-4 py-2 rounded shadow",onClick:()=>a(!0),children:"Edit post content"})})]})})]})};export{ve as default};
